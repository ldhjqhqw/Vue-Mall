<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>函数节流与防抖</title>
</head>
<body>

  <button id="handle">测试不做函数节流/防抖</button>
  <button id="throttle">测试函数节流</button>
  <button id="debounce">测试函数防抖</button>
  
  <!-- 
    1. 事件频繁触发可能造成的问题?
        1). 一些浏览器事件:window.onresize、window.mousemove等，触发的频率非常高，会造成浏览器性能问题
        2). 如果向后台发送请求，频繁触发，对服务器造成不必要的压力
    
    2. 如何限制事件处理函数频繁调用
        1). 函数节流
        2). 函数防抖

    3. 函数节流(throttle)
        理解: 
            在规定的间隔时间范围内不会重复触发回调，只有大于这个时间间隔才会触发回调，把频繁触发变为少量触发
            
    4. 函数防抖(debounce)
        理解:
        前面的所有的触发都被取消，最后一次执行在规定的时间之后才会，也就是说如果连续快速的触发  只会执行一次
  -->

  <script src="https://cdn.bootcss.com/lodash.js/4.17.15/lodash.js"></script>
  <script>
    /* 处理点击事件的回调函数 */
    function handleClick(event) { // 处理事件的回调
      // 发请求了
      // axios()
      console.log('处理点击事件', this, event)
    }

    document.getElementById('handle').onclick = handleClick

    // _.throttle(handleFn, delay) 节流
    // 参数: handleFn: 真正处理事件的回调函数  delay 规定时间
    // 返回值: 一个新函数(返回的函数内部间隔指定的dalay时间后调用)
    // _.debounce(handleFn, delay) 防抖 用法同上

    document.getElementById('throttle').onclick = _.throttle(handleClick, 2000)
    document.getElementById('debounce').onclick = _.debounce(handleClick, 2000)
  </script>

</body>
</html>